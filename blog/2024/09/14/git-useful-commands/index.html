<!doctype html><html class=h-100 lang=en-us><head><title>ZeroToOne - Git Useful Commands</title><meta name=description content="As a software engineer using Git almost every day, it&rsquo;s essential for me to master this tool to efficiently manage my code and tasks. In this …"><meta name=author content="Morteza NourelahiAlamdari"><link rel=icon type=image/x-icon href=/img/favicon.png><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/awesomefont.min.css><link rel=stylesheet href=/css/awesomefont.solid.min.css><meta property="og:image" content="https://0t1.me/img/logo.png"><meta property="og:image:type" content="image/png"><script src=/js/jquery.min.js></script><script src=/js/bootstrap.min.js></script></head><body class="fs-5 d-flex flex-column"><header class="container p-2"><a class="navbar-brand text-lowercase" title=Home href=https://0t1.me/>#!/bin/mort</a></header><nav class="navbar navbar-expand-lg navbar-dark shadow"><div class=container><button type=button class="navbar-toggler py-1 px-2" aria-controls=top-navbar data-bs-target=#top-navbar data-bs-toggle=collapse aria-expanded=false aria-label="toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse justify-content-left" id=top-navbar><ul class=navbar-nav><li class=nav-item><a class=nav-link title=Home href=https://0t1.me/>Home</a></li><li class=nav-item><a class=nav-link title=Blog href=/blog>Blog</a></li><li class=nav-item><a class=nav-link title=Projects href=https://github.com/mortymacs target=_blank>Projects</a></li><li class=nav-item><a class=nav-link title=Dotfiles href=/dotfiles>Dotfiles</a></li><li class=nav-item><a class=nav-link title=Appointment href=https://calendly.com/mortymacs/30min target=_blank>Appointment</a></li><li class=nav-item><a class=nav-link title=Strengths href=/strengths>Strengths</a></li><li class=nav-item><a class=nav-link title=About href=/about>About</a></li></ul></div></div></nav><div class="d-flex flex-column container flex-grow-1 p-3" id=main><div class=flex-grow-1><div class=row><div class="main-content py-2"><div class=mb-3><div class="article-title d-inline"><a href=https://0t1.me/blog/2024/09/14/git-useful-commands/ class="text-capitalize fw-bold d-inline-block link-underline link-underline-opacity-0">Git Useful Commands</a></div><div><small class=fst-italic>Saturday, Sep 14, 2024</small></div><div class=article-toc><h4 class=mt-3>Table of Contents</h4><nav id=TableOfContents><ul><li><a href=#alias>Alias</a><ul><li><a href=#gitignore>Gitignore</a></li></ul></li><li><a href=#commands>Commands</a><ul><li><a href=#note>Note</a></li><li><a href=#worktree>Worktree</a></li><li><a href=#cherry-pick>Cherry pick</a></li><li><a href=#add-patch>Add Patch</a></li><li><a href=#bisect>Bisect</a></li><li><a href=#rev-list>Rev-List</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div><div class=article-body><p>As a software engineer using Git almost every day, it&rsquo;s essential for me to master this tool to efficiently manage my code and tasks.
In this discussion, I&rsquo;ll go over some Git commands that have significantly boosted my productivity during development and maintenance.</p><h2 id=alias>Alias</h2><h3 id=gitignore><a href=https://git-scm.com/docs/gitignore>Gitignore</a></h3><p>You’re probably already familiar with it, but that&rsquo;s not the focus here.
Instead, I’ll show you how to generate a gitignore list for your project.
The main purpose of a gitignore file is to prevent certain file types from being committed or tracked in your repository.</p><p>There&rsquo;s an API available that allows you to generate a custom gitignore file based on your needs: <code>https://www.toptal.com/developers/gitignore/api/$args</code>.
This can be a quick and convenient way to create a gitignore list tailored to your project.</p><p>I believe the best approach is to create a simple function that utilizes the API for generating a custom gitignore file.
This way, you can easily automate the process:</p><p>for bash:<div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gitignore<span style=color:#00d3d0>()</span> <span style=color:#00d3d0>{</span> curl -s <span style=color:#79a8ff>&#34;https://www.toptal.com/developers/gitignore/api/</span><span style=color:#00d3d0>$1</span><span style=color:#79a8ff>&#34;</span>; <span style=color:#00d3d0>}</span>
</span></span></code></pre></td></tr></table></div></div></div></p><p>for fish:<div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fish data-lang=fish><span style=display:flex><span><span style=color:#b6a0ff>function</span> <span style=color:#feacd0>gitignore</span>
</span></span><span style=display:flex><span>    <span style=color:#feacd0>curl</span> -s <span style=color:#79a8ff>&#34;https://www.toptal.com/developers/gitignore/api/</span><span style=color:#00d3d0>$argv</span><span style=color:#79a8ff>&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#b6a0ff>end</span>
</span></span></code></pre></td></tr></table></div></div></div></p><p>Now, you can use it easily:</p><div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ gitignore go &gt; .gitignore
</span></span></code></pre></td></tr></table></div></div></div><h2 id=commands>Commands</h2><h3 id=note><a href=https://git-scm.com/docs/git-notes>Note</a></h3><p>Sometimes you might need to add a note about a commit or mention something related to it without altering the commit itself.
For instance, you might want to note that a commit was tested by X, Y, and Z.
In such cases, you can use <code>git note</code> to add this additional information.</p><p>For example, if you want to add a note to a commit indicating that it needs a better implementation due to resource constraints:</p><div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ git notes add 9cc33538u8 -m <span style=color:#79a8ff>&#34;it needs a better implementation due to resource constraints&#34;</span>
</span></span></code></pre></td></tr></table></div></div></div><p>Output in <code>git log</code>:<div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>$ git log
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>commit 9cc33537d7da32cf6c5e108df6faa0784d134ab2 (tag: v3.1.0)
</span></span><span style=display:flex><span>Author: Morteza NourelahiAlamdari &lt;m@0t1.me&gt;
</span></span><span style=display:flex><span>Date:   Sun Dec 10 16:16:27 2023 +0100
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Release v3.1.0
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Notes:
</span></span><span style=display:flex><span>    it needs a better implementation
</span></span><span style=display:flex><span>...
</span></span></code></pre></td></tr></table></div></div></div></p><p>This way, you can keep track of important details or improvements needed without modifying the original commit.</p><p>and to remove the note if you want:<div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ git notes remove 9cc33538u8
</span></span></code></pre></td></tr></table></div></div></div></p><h3 id=worktree><a href=https://git-scm.com/docs/git-worktree>Worktree</a></h3><p>When you&rsquo;re refactoring, developing, or making changes in your current branch,
you might need to debug or check something in the production version of the system. With <code>git worktree</code>,
you can quickly create a separate working directory for the desired branch without stashing or altering your current code.
This allows you to test and debug in a separate environment and easily remove it when you&rsquo;re done.
It&rsquo;s a straightforward and efficient solution!</p><div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ git worktree add debug origin/main
</span></span></code></pre></td></tr></table></div></div></div><p>Now, go to the <code>debug</code> directory (<code>cd debug</code>) and perform whatever tasks or testing you need to do.
Once you&rsquo;re finished, you can easily remove the directory by:</p><div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ git worktree remove debug
</span></span></code></pre></td></tr></table></div></div></div><h3 id=cherry-pick><a href=https://git-scm.com/docs/git-cherry-pick>Cherry pick</a></h3><p>You’ve probably heard this before, and I don’t want to bore you with the usual details.
My goal here is to give you a practical idea of when to use cherry-picking.
For example, you might get a pull request (PR) that gets rejected or canceled due to internal decisions.
Or maybe a PR gets merged into the development branch, but you only need one specific commit from it to fix something in production.
That’s where cherry-picking can be really useful.</p><div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ git fetch --all
</span></span><span style=display:flex><span>$ git checkout main
</span></span><span style=display:flex><span>$ git cherry-pick ef003e4facea1f33b2020fadc2ea844933e176b3
</span></span><span style=display:flex><span><span style=color:#00d3d0>[</span>master 31c2135<span style=color:#00d3d0>]</span> Fix memory leak
</span></span><span style=display:flex><span> Date: Sat Sep <span style=color:#00bcff>14</span> 16:59:58 <span style=color:#00bcff>2024</span> +0200
</span></span><span style=display:flex><span> <span style=color:#00bcff>1</span> file changed, <span style=color:#00bcff>9</span> insertions<span style=color:#00d3d0>(</span>+<span style=color:#00d3d0>)</span>, <span style=color:#00bcff>1</span> deletion<span style=color:#00d3d0>(</span>-<span style=color:#00d3d0>)</span>
</span></span></code></pre></td></tr></table></div></div></div><p>Let&rsquo;s review what we have so far:<div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>$ git log
</span></span><span style=display:flex><span>commit 31c2135dbbfbf623978aa0372c336c1c033f75d4 (HEAD -&gt; master)
</span></span><span style=display:flex><span>Author: Morteza NourelahiAlamdari &lt;m@0t1.me&gt;
</span></span><span style=display:flex><span>Date:   Sat Sep 14 16:59:58 2024 +0200
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Fix memory leak
</span></span><span style=display:flex><span>....
</span></span></code></pre></td></tr></table></div></div></div></p><h3 id=add-patch><a href=https://git-scm.com/docs/git-add>Add Patch</a></h3><p>Sometimes, when making changes to a file, you might only want to commit a few specific lines rather than the entire file.
In the past, I’d use <code>git stash</code>, manually apply the changes I wanted, and then add the file.
Now, though, I can use <code>git add -p</code> to selectively stage only the lines I want to commit, skipping the rest of the file.</p><div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ git add -p
</span></span></code></pre></td></tr></table></div></div></div><p>Now, it provides an interactive environment where you can commit only the specific parts you want:<div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span>diff --git a/a.c b/a.c
</span></span><span style=display:flex><span>index 1261f00..0653a06 100644
</span></span><span style=display:flex><span>--- a/a.c
</span></span><span style=display:flex><span>+++ b/a.c
</span></span><span style=display:flex><span>@@ -2,8 +2,16 @@
</span></span><span style=display:flex><span> #include &lt;stdlib.h&gt;
</span></span><span style=display:flex><span> #include &lt;string.h&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>+void free_char(char **p) {
</span></span><span style=display:flex><span>+    if (p &amp;&amp; *p) {
</span></span><span style=display:flex><span>+        free(*p);
</span></span><span style=display:flex><span>+        *p = NULL;
</span></span><span style=display:flex><span>+    }
</span></span><span style=display:flex><span>+}
</span></span><span style=display:flex><span>+
</span></span><span style=display:flex><span> int main() {
</span></span><span style=display:flex><span>-    char *name = (char *)malloc(sizeof(char) * 15);
</span></span><span style=display:flex><span>+    char *name __attribute__((cleanup(free_char))) = (char *)malloc(sizeof(char) * 15);
</span></span><span style=display:flex><span>     strcpy(name, &#34;world&#34;);
</span></span><span style=display:flex><span>     printf(&#34;welcome: %s&#34;, name);
</span></span><span style=display:flex><span>+    printf(&#34;goodbye\n&#34;);
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>(1/1) Stage this hunk [y,n,q,a,d,s,e,?]?
</span></span></code></pre></td></tr></table></div></div></div></p><p>Here, we only want to add the last line, <code>print("goodbye\n");</code>, and leave the rest unchanged.</p><p>As shown in the last line, <code>git add -p</code> provides a menu that lets you choose how to proceed.
Initially, you can add all the changes, but since we only want to include a specific line, you type <code>s</code> to split the current hunk into smaller chunks.</p><p>You can type <code>?</code> to see the full menu of options:<div class="code mb-2"><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>y - stage this hunk
</span></span><span style=display:flex><span>n - do not stage this hunk
</span></span><span style=display:flex><span>q - quit; do not stage this hunk or any of the remaining ones
</span></span><span style=display:flex><span>a - stage this hunk and all later hunks in the file
</span></span><span style=display:flex><span>d - do not stage this hunk or any of the later hunks in the file
</span></span><span style=display:flex><span>s - split the current hunk into smaller hunks
</span></span><span style=display:flex><span>e - manually edit the current hunk
</span></span><span style=display:flex><span>? - print help
</span></span></code></pre></div></div></p><p>After typing <code>s</code>, it now shows us this:<div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span>Split into 3 hunks.
</span></span><span style=display:flex><span>@@ -2,4 +2,11 @@
</span></span><span style=display:flex><span> #include &lt;stdlib.h&gt;
</span></span><span style=display:flex><span> #include &lt;string.h&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>+void free_char(char **p) {
</span></span><span style=display:flex><span>+    if (p &amp;&amp; *p) {
</span></span><span style=display:flex><span>+        free(*p);
</span></span><span style=display:flex><span>+        *p = NULL;
</span></span><span style=display:flex><span>+    }
</span></span><span style=display:flex><span>+}
</span></span><span style=display:flex><span>+
</span></span><span style=display:flex><span> int main() {
</span></span><span style=display:flex><span>(3/3) Stage this hunk [y,n,q,a,d,K,g,/,e,?]?
</span></span></code></pre></td></tr></table></div></div></div></p><p>But that&rsquo;s not what we&rsquo;re looking for. Let&rsquo;s type <code>n</code>, which means &ldquo;do not stage this hunk&rdquo;, to move to the next chunk.
We’ll continue doing this until we find the part we want to add.</p><div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span>@@ -7,3 +14,4 @@
</span></span><span style=display:flex><span>     strcpy(name, &#34;world&#34;);
</span></span><span style=display:flex><span>     printf(&#34;welcome: %s&#34;, name);
</span></span><span style=display:flex><span>+    printf(&#34;goodbye\n&#34;);
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>(3/3) Stage this hunk [y,n,q,a,d,K,g,/,e,?]?
</span></span></code></pre></td></tr></table></div></div></div><p>Now we type <code>y</code>, which means &ldquo;stage this hunk&rdquo;. That&rsquo;s it! Next, let&rsquo;s run <code>git diff --staged</code> to review what we’ve added:<div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span>$ git diff --staged
</span></span><span style=display:flex><span>diff --git a/a.c b/a.c
</span></span><span style=display:flex><span>index 1261f00..d12075d 100644
</span></span><span style=display:flex><span>--- a/a.c
</span></span><span style=display:flex><span>+++ b/a.c
</span></span><span style=display:flex><span>@@ -6,4 +6,5 @@ int main() {
</span></span><span style=display:flex><span>     char *name = (char *)malloc(sizeof(char) * 15);
</span></span><span style=display:flex><span>     strcpy(name, &#34;world&#34;);
</span></span><span style=display:flex><span>     printf(&#34;welcome: %s&#34;, name);
</span></span><span style=display:flex><span>+    printf(&#34;goodbye\n&#34;);
</span></span><span style=display:flex><span> }
</span></span></code></pre></td></tr></table></div></div></div></p><p>This is exactly what we wanted.
If you run <code>git status</code>, you’ll see that the file appears in both staged and non-staged sections, as we only selected a part of the file for our upcoming commit.</p><h3 id=bisect><a href=https://git-scm.com/docs/git-bisect>Bisect</a></h3><p><code>git bisect</code> is a valuable tool for debugging.
It allows you to navigate through past commits and run tests or commands to identify which commit introduced a problem.
By testing a range of commits, you can pinpoint the exact commit where the issue began.</p><p>For instance, if you notice a memory leak in the code on the main branch and want to identify which commit introduced it,
you can use <code>git bisect</code> to help pinpoint the source. In C/C++, tools like Valgrind can be used to detect the memory leak.
For example:</p><div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#a8a8a8>#include</span> <span style=color:#a8a8a8>&lt;stdio.h&gt;</span><span style=color:#a8a8a8>
</span></span></span><span style=display:flex><span><span style=color:#a8a8a8>#include</span> <span style=color:#a8a8a8>&lt;stdlib.h&gt;</span><span style=color:#a8a8a8>
</span></span></span><span style=display:flex><span><span style=color:#a8a8a8>#include</span> <span style=color:#a8a8a8>&lt;string.h&gt;</span><span style=color:#a8a8a8>
</span></span></span><span style=display:flex><span><span style=color:#a8a8a8></span>
</span></span><span style=display:flex><span><span style=color:#6ae4b9>int</span> <span style=color:#feacd0>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#6ae4b9>char</span> <span style=color:#00d3d0>*</span>name <span style=color:#00d3d0>=</span> (<span style=color:#6ae4b9>char</span> <span style=color:#00d3d0>*</span>)<span style=color:#feacd0>malloc</span>(<span style=color:#b6a0ff>sizeof</span>(<span style=color:#6ae4b9>char</span>) <span style=color:#00d3d0>*</span> <span style=color:#00bcff>10</span>);
</span></span><span style=display:flex><span>    <span style=color:#feacd0>strcpy</span>(name, <span style=color:#79a8ff>&#34;test&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#feacd0>printf</span>(<span style=color:#79a8ff>&#34;%s&#34;</span>, name);
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div></div><p>When I compile and run the code, it works fine, but it has a memory leak that never gets released. To track it down, we use Valgrind:</p><div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>  valgrind --leak-check<span style=color:#00d3d0>=</span>full --error-exitcode<span style=color:#00d3d0>=</span><span style=color:#00bcff>1</span> ./a.out
</span></span><span style=display:flex><span><span style=color:#00d3d0>==</span><span style=color:#00d3d0>325762</span><span style=color:#00d3d0>==</span> Memcheck, a memory error <span style=color:#00d3d0>detector</span>
</span></span><span style=display:flex><span><span style=color:#00d3d0>==</span><span style=color:#00d3d0>325762</span><span style=color:#00d3d0>==</span> Copyright <span style=color:#00d3d0>(</span>C<span style=color:#00d3d0>)</span> 2002-2022, and GNU GPL&#39;d, by Julian Seward et al.
</span></span><span style=display:flex><span><span style=color:#00d3d0>==</span><span style=color:#00d3d0>325762</span><span style=color:#00d3d0>==</span> Using Valgrind-3.22.0 and LibVEX; rerun with -h <span style=color:#b6a0ff>for</span> copyright <span style=color:#00d3d0>info</span>
</span></span><span style=display:flex><span><span style=color:#00d3d0>==</span><span style=color:#00d3d0>325762</span><span style=color:#00d3d0>==</span> Command: ./a.out
</span></span><span style=display:flex><span><span style=color:#00d3d0>==</span><span style=color:#00d3d0>325762</span><span style=color:#00d3d0>==</span>
</span></span><span style=display:flex><span><span style=color:#00d3d0>test</span><span style=color:#00d3d0>==</span><span style=color:#00d3d0>325762</span><span style=color:#00d3d0>==</span>
</span></span><span style=display:flex><span><span style=color:#00d3d0>==</span><span style=color:#00d3d0>325762</span><span style=color:#00d3d0>==</span> HEAP SUMMARY:
</span></span><span style=display:flex><span><span style=color:#00d3d0>==</span><span style=color:#00d3d0>325762</span><span style=color:#00d3d0>==</span>     in use at exit: <span style=color:#00bcff>10</span> bytes in <span style=color:#00bcff>1</span> <span style=color:#00d3d0>blocks</span>
</span></span><span style=display:flex><span><span style=color:#00d3d0>==</span><span style=color:#00d3d0>325762</span><span style=color:#00d3d0>==</span>   total heap usage: <span style=color:#00bcff>2</span> allocs, <span style=color:#00bcff>1</span> frees, 1,034 bytes <span style=color:#00d3d0>allocated</span>
</span></span><span style=display:flex><span><span style=color:#00d3d0>==</span><span style=color:#00d3d0>325762</span><span style=color:#00d3d0>==</span>
</span></span><span style=display:flex><span><span style=color:#00d3d0>==</span><span style=color:#00d3d0>325762</span><span style=color:#00d3d0>==</span> LEAK SUMMARY:
</span></span><span style=display:flex><span><span style=color:#00d3d0>==</span><span style=color:#00d3d0>325762</span><span style=color:#00d3d0>==</span>    definitely lost: <span style=color:#00bcff>10</span> bytes in <span style=color:#00bcff>1</span> <span style=color:#00d3d0>blocks</span>
</span></span><span style=display:flex><span><span style=color:#00d3d0>==</span><span style=color:#00d3d0>325762</span><span style=color:#00d3d0>==</span>    indirectly lost: <span style=color:#00bcff>0</span> bytes in <span style=color:#00bcff>0</span> <span style=color:#00d3d0>blocks</span>
</span></span><span style=display:flex><span><span style=color:#00d3d0>==</span><span style=color:#00d3d0>325762</span><span style=color:#00d3d0>==</span>      possibly lost: <span style=color:#00bcff>0</span> bytes in <span style=color:#00bcff>0</span> <span style=color:#00d3d0>blocks</span>
</span></span><span style=display:flex><span><span style=color:#00d3d0>==</span><span style=color:#00d3d0>325762</span><span style=color:#00d3d0>==</span>    still reachable: <span style=color:#00bcff>0</span> bytes in <span style=color:#00bcff>0</span> <span style=color:#00d3d0>blocks</span>
</span></span><span style=display:flex><span><span style=color:#00d3d0>==</span><span style=color:#00d3d0>325762</span><span style=color:#00d3d0>==</span>         suppressed: <span style=color:#00bcff>0</span> bytes in <span style=color:#00bcff>0</span> <span style=color:#00d3d0>blocks</span>
</span></span><span style=display:flex><span><span style=color:#00d3d0>==</span><span style=color:#00d3d0>325762</span><span style=color:#00d3d0>==</span> Rerun with --leak-check<span style=color:#00d3d0>=</span>full to see details of leaked <span style=color:#00d3d0>memory</span>
</span></span><span style=display:flex><span><span style=color:#00d3d0>==</span><span style=color:#00d3d0>325762</span><span style=color:#00d3d0>==</span>
</span></span><span style=display:flex><span><span style=color:#00d3d0>==</span><span style=color:#00d3d0>325762</span><span style=color:#00d3d0>==</span> For lists of detected and suppressed errors, rerun with: -s
</span></span><span style=display:flex><span><span style=color:#00d3d0>==</span><span style=color:#00d3d0>325762</span><span style=color:#00d3d0>==</span> ERROR SUMMARY: <span style=color:#00bcff>0</span> errors from <span style=color:#00bcff>0</span> contexts <span style=color:#00d3d0>(</span>suppressed: <span style=color:#00bcff>0</span> from 0<span style=color:#00d3d0>)</span>
</span></span></code></pre></td></tr></table></div></div></div><p>As indicated, there are <code>2 allocs</code> and <code>1 frees</code>, with the <code>LEAK SUMMARY</code> section providing more details on the issue.</p><p>Now, imagine your code was working perfectly, but suddenly, when you try to push your changes, you discover a memory leak.
You need to figure out which commit introduced the issue to determine if you can fix it with a patch or if other versions are affected as well.</p><p>Let&rsquo;s first take a look at our commit history:<div class="code mb-2"><pre tabindex=0><code class=language-gitlog data-lang=gitlog>$ git log
commit 996b0dfc6ffbc5fddb78767f26e7790aacfaa71d (HEAD -&gt; master)
Author: Morteza NourelahiAlamdari &lt;m@0t1.me&gt;
Date:   Sat Sep 14 15:23:57 2024 +0200

    Remove dead code

commit e98cd3903bbe8066fe0240acfc2cdbc33075bb50
Author: Morteza NourelahiAlamdari &lt;m@0t1.me&gt;
Date:   Sat Sep 14 15:23:44 2024 +0200

    Fix name value to &#39;world&#39;

commit 995e8283162da6a6587877c0d60b57b869a354ab
Author: Morteza NourelahiAlamdari &lt;m@0t1.me&gt;
Date:   Sat Sep 14 15:23:00 2024 +0200

    Change name length

commit c97e07d10ff6906570c3170e55c22163e5b83f04
Author: Morteza NourelahiAlamdari &lt;m@0t1.me&gt;
Date:   Sat Sep 14 15:22:45 2024 +0200

    Update message

commit 1f223b694dac72ebbf595aafbb81132c3e0de014
Author: Morteza NourelahiAlamdari &lt;m@0t1.me&gt;
Date:   Sat Sep 14 15:22:28 2024 +0200

    Init repo
</code></pre></div></p><p>The only thing we know is that the current branch, which we’ll call &ldquo;bad,&rdquo; has the issue.
To find the problematic commit, we need to identify a &ldquo;good&rdquo; commit to set our testing range.
In this case, I&rsquo;ll use the &ldquo;Init repo&rdquo; commit, <code>1f223b694dac72ebbf595aafbb81132c3e0de014</code>, as our reference for the &ldquo;good&rdquo; commit.</p><p>Now let&rsquo;s get started:</p><div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ git bisect start
</span></span><span style=display:flex><span>status: waiting <span style=color:#b6a0ff>for</span> both good and bad commits
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ git bisect bad HEAD
</span></span><span style=display:flex><span>status: waiting <span style=color:#b6a0ff>for</span> good commit<span style=color:#00d3d0>(</span>s<span style=color:#00d3d0>)</span>, bad commit known
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ git bisect good 1f223b694dac72ebbf595aafbb81132c3e0de014
</span></span><span style=display:flex><span>Bisecting: <span style=color:#00bcff>1</span> revision left to <span style=color:#f78fe7>test</span> after this <span style=color:#00d3d0>(</span>roughly <span style=color:#00bcff>1</span> step<span style=color:#00d3d0>)</span>
</span></span><span style=display:flex><span><span style=color:#00d3d0>[</span>995e8283162da6a6587877c0d60b57b869a354ab<span style=color:#00d3d0>]</span> Change name length
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ git bisect run bash -c <span style=color:#79a8ff>&#39;gcc a.c -o debug.out &amp;&amp; valgrind --leak-check=full --error-exitcode=1 ./debug.out&#39;</span>
</span></span><span style=display:flex><span>  git bisect run bash -c <span style=color:#79a8ff>&#39;gcc a.c -o debug.out &amp;&amp; valgrind --leak-check=full --error-exitcode=1 ./debug.out&#39;</span>
</span></span><span style=display:flex><span>running <span style=color:#79a8ff>&#39;bash&#39;</span> <span style=color:#79a8ff>&#39;-c&#39;</span> <span style=color:#79a8ff>&#39;gcc a.c -o debug.out &amp;&amp; valgrind --leak-check=full --error-exitcode=1 ./debug.out&#39;</span>
</span></span><span style=display:flex><span><span style=color:#00d3d0>==</span><span style=color:#00d3d0>405388</span><span style=color:#00d3d0>==</span> Memcheck, a memory error <span style=color:#00d3d0>detector</span>
</span></span><span style=display:flex><span><span style=color:#00d3d0>==</span><span style=color:#00d3d0>405388</span><span style=color:#00d3d0>==</span> Copyright <span style=color:#00d3d0>(</span>C<span style=color:#00d3d0>)</span> 2002-2022, and GNU GPL<span style=color:#79a8ff>&#39;d, by Julian Seward et al.
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>==405388== Using Valgrind-3.22.0 and LibVEX; rerun with -h for copyright info
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>==405388== Command: ./debug.out
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>==405388==
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>welcome: world==405388==
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>==405388== HEAP SUMMARY:
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>==405388==     in use at exit: 15 bytes in 1 blocks
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>==405388==   total heap usage: 2 allocs, 1 frees, 1,039 bytes allocated
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>==405388==
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>==405388== 15 bytes in 1 blocks are definitely lost in loss record 1 of 1
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>==405388==    at 0x484576B: malloc (in /libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>==405388==    by 0x401193: main (in /home/mort/c/debug.out)
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>==405388==
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>==405388== LEAK SUMMARY:
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>==405388==    definitely lost: 15 bytes in 1 blocks
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>==405388==    indirectly lost: 0 bytes in 0 blocks
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>==405388==      possibly lost: 0 bytes in 0 blocks
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>==405388==    still reachable: 0 bytes in 0 blocks
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>==405388==         suppressed: 0 bytes in 0 blocks
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>==405388==
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>==405388== For lists of detected and suppressed errors, rerun with: -s
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>==405388== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>e98cd3903bbe8066fe0240acfc2cdbc33075bb50 is the first bad commit
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>commit e98cd3903bbe8066fe0240acfc2cdbc33075bb50
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>Author: Morteza NourelahiAlamdari &lt;m@0t1.me&gt;
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>Date:   Sat Sep 14 15:23:44 2024 +0200
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>
</span></span></span><span style=display:flex><span><span style=color:#79a8ff>    Fix name value to &#39;</span>world&#39;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> a.c | <span style=color:#00bcff>4</span> ++--
</span></span><span style=display:flex><span> <span style=color:#00bcff>1</span> file changed, <span style=color:#00bcff>2</span> insertions<span style=color:#00d3d0>(</span>+<span style=color:#00d3d0>)</span>, <span style=color:#00bcff>2</span> deletions<span style=color:#00d3d0>(</span>-<span style=color:#00d3d0>)</span>
</span></span><span style=display:flex><span>bisect found first bad commit
</span></span></code></pre></td></tr></table></div></div></div><p>Look, we&rsquo;ve identified the commit that introduced the memory leak! Let&rsquo;s examine the changes:<div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span>$ git show e98cd3903bbe8066fe0240acfc2cdbc33075bb50
</span></span><span style=display:flex><span>commit e98cd3903bbe8066fe0240acfc2cdbc33075bb50
</span></span><span style=display:flex><span>Author: Morteza NourelahiAlamdari &lt;m@0t1.me&gt;
</span></span><span style=display:flex><span>Date:   Sat Sep 14 15:23:44 2024 +0200
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Fix name value to &#39;world&#39;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>diff --git a/a.c b/a.c
</span></span><span style=display:flex><span>index 7ddec09..c862215 100644
</span></span><span style=display:flex><span>--- a/a.c
</span></span><span style=display:flex><span>+++ b/a.c
</span></span><span style=display:flex><span>@@ -10,7 +10,7 @@ void free_char(char **p) {
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> int main() {
</span></span><span style=display:flex><span>-    char *name __attribute__((cleanup(free_char))) = (char *)malloc(sizeof(char) * 15);
</span></span><span style=display:flex><span>-    strcpy(name, &#34;test&#34;);
</span></span><span style=display:flex><span>+    char *name = (char *)malloc(sizeof(char) * 15);
</span></span><span style=display:flex><span>+    strcpy(name, &#34;world&#34;);
</span></span><span style=display:flex><span>     printf(&#34;welcome: %s&#34;, name);
</span></span><span style=display:flex><span> }
</span></span></code></pre></td></tr></table></div></div></div></p><p>As soon as the <code>__attribute__((cleanup(free_char)))</code> was removed, we started encountering the memory leak.</p><p>Finally, run the reset command to return to the master branch:<div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ git biset reset
</span></span><span style=display:flex><span>Previous HEAD position was e98cd39 Fix name value to <span style=color:#79a8ff>&#39;world&#39;</span>
</span></span><span style=display:flex><span>Switched to branch <span style=color:#79a8ff>&#39;master&#39;</span>
</span></span></code></pre></td></tr></table></div></div></div></p><h3 id=rev-list><a href=https://git-scm.com/docs/git-rev-list>Rev-List</a></h3><p>One of my favorite ways to recover a deleted file is using this method.
For example, if I removed a config or source code file from the project six months ago and now need to see what was in
that file to copy a single line for use in my current branch, this approach is perfect.</p><div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ git rev-list -1 --all -- /path/to/deleted-file
</span></span><span style=display:flex><span>1c55d557f214b4c70ab2c2a0130f080762d0a3d0
</span></span></code></pre></td></tr></table></div></div></div><ul><li><code>-1</code> refers to just the first commit.</li><li><code>--all</code> includes all the commits.</li></ul><p>Now, we need to checkout that commit hash to recover the file.<div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ git checkout 1c55d557f214b4c70ab2c2a0130f080762d0a3d0^ -- /path/to/deleted-file
</span></span></code></pre></td></tr></table></div></div></div></p><p>Now, if you check the output of <code>git status</code>:<div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ git status
</span></span><span style=display:flex><span>On branch main
</span></span><span style=display:flex><span>Changes to be committed:
</span></span><span style=display:flex><span>  <span style=color:#00d3d0>(</span>use <span style=color:#79a8ff>&#34;git restore --staged &lt;file&gt;...&#34;</span> to unstage<span style=color:#00d3d0>)</span>
</span></span><span style=display:flex><span>	new file:   /path/to/deleted-file
</span></span></code></pre></td></tr></table></div></div></div></p><p>Here&rsquo;s an interesting thread on Stack Overflow about restoring a deleted folder in a Git repository: <a href=https://stackoverflow.com/questions/30875205/restore-a-deleted-folder-in-a-git-repo>https://stackoverflow.com/questions/30875205/restore-a-deleted-folder-in-a-git-repo</a></p><h2 id=conclusion>Conclusion</h2><p>Git is an incredibly useful tool for tracking changes in complex scenarios.
For example, you can find only changed files using <code>git grep</code>, trigger pipelines by committing with an empty message, and more.
It all depends on your needs. I recommend reading the official documentation, and if you like,
you can set up a bunch of aliases in your shell or Git to streamline your workflow and make processes easier to handle.</p></div><div></div><div><label class="badge p-0 article-tag fs-6 mx-1">#cli</label>
<label class="badge p-0 article-tag fs-6 mx-1">#git</label>
<label class="badge p-0 article-tag fs-6 mx-1">#utilities</label>
<label class="badge p-0 article-tag fs-6 mx-1">#tools</label></div><div class=mb-3></div><div class=giscus></div></div><script src=https://giscus.app/client.js data-repo=mortymacs/mortymacs data-repo-id=R_kgDOLJ_j-Q data-category=Q&A data-category-id=DIC_kwDOLJ_j-c4Ccuug data-mapping=url data-reactions-enabled=0 data-emit-metadata=0 data-input-position=top data-theme=dark data-lang=en data-loading=lazy crossorigin=anonymous async></script></div></div></div></div><footer class="footer py-1 mt-auto fs-6"><div class=d-flex><div class="p-1 px-2 copyright-1">&copy;Morteza NourelahiAlamdari. All rights reserved.</div><div class="p-1 px-2 flex-fill text-end copyright-2"><a href=https://creativecommons.org/licenses/by-sa/4.0/ class="link-light link-underline-light" target=_blank><i class="fa-solid fa-scale-balanced"></i> CC BY-SA 4.0</a></div><div class="p-1 px-2 text-end git-status"><a href=https://github.com/mortymacs/mortymacs class="link-light link-underline-light" title=Git target=_blank><i class="fa-solid fa-code-branch"></i>origin/main</a></div><div class="p-1 px-2 text-end links"><a class="px-1 link-info" title=Github href=https://github.com/mortymacs target=_blank><i class="fa-brands fa-github"></i></a>
<a class="px-1 link-info" title=LinkedIn href=https://www.linkedin.com/in/mortymacs/ target=_blank><i class="fa-brands fa-linkedin"></i></a>
<a class="px-1 link-info" title=RSS href=https://0t1.me/rss.xml target=_blank><i class="fa-solid fa-square-rss"></i></a>
<a class="px-1 link-info" title=Sitemap href=https://0t1.me/sitemap.xml target=_blank><i class="fa-solid fa-sitemap"></i></a></div></div></footer></body></html>