<!doctype html><html class=h-100 lang=en-us><head><title>ZeroToOne - Enforce adherence of derived classes to parent signatures in Python</title><meta name=description content="When we&rsquo;re developing an object oriented systems in Python, there are often instances where we have to create abstract classes. These classes â€¦"><meta name=author content="Morteza NourelahiAlamdari"><link rel=icon type=image/x-icon href=/img/favicon.png><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/awesomefont.min.css><link rel=stylesheet href=/css/awesomefont.solid.min.css><meta property="og:image" content="https://0t1.me/img/logo.png"><meta property="og:image:type" content="image/png"></head><body class="fs-5 d-flex flex-column"><header class="container p-2"><a class="navbar-brand text-lowercase" title=Home href=https://0t1.me/>#!/bin/mort</a></header><nav class="navbar navbar-expand-lg navbar-dark shadow"><div class=container><button type=button class="navbar-toggler py-1 px-2" aria-controls=top-navbar data-bs-target=#top-navbar data-bs-toggle=collapse aria-expanded=false aria-label="toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse justify-content-left" id=top-navbar><ul class=navbar-nav><li class=nav-item><a class=nav-link title=Home href=https://0t1.me/>Home</a></li><li class=nav-item><a class=nav-link title=Blog href=/blog>Blog</a></li><li class=nav-item><a class=nav-link title=Projects href=https://github.com/mortymacs target=_blank>Projects</a></li><li class=nav-item><a class=nav-link title=Dotfiles href=/dotfiles>Dotfiles</a></li><li class=nav-item><a class=nav-link title=Appointment href=https://calendly.com/mortymacs/30min target=_blank>Appointment</a></li><li class=nav-item><a class=nav-link title=Strengths href=/strengths>Strengths</a></li><li class=nav-item><a class=nav-link title=About href=/about>About</a></li></ul></div></div></nav><div class="d-flex flex-column container flex-grow-1 p-3" id=main><div class=flex-grow-1><div class=row><div class="main-content py-2"><div class=mb-3><div class="article-title d-inline"><a href=https://0t1.me/blog/2023/12/21/enforce-adherence-of-derived-classes-to-parent-signatures-in-python/ class="text-capitalize fw-bold d-inline-block link-underline link-underline-opacity-0">Enforce adherence of derived classes to parent signatures in Python</a></div><div><small class=fst-italic>Thursday, Dec 21, 2023</small></div><div class=article-toc><h4 class=mt-3>Table of Contents</h4><nav id=TableOfContents><ul><li><a href=#the-problem-with-abstract-classes>The Problem with Abstract Classes</a></li><li><a href=#creating-abstract-classes-in-python>Creating Abstract Classes in Python</a></li><li><a href=#the-issue-no-signature-enforcement>The Issue: No Signature Enforcement</a></li><li><a href=#solution-using-abcmeta-library>Solution: Using abcmeta Library</a></li><li><a href=#how-abcmeta-works>How abcmeta Works</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div><div class=article-body><p>When we&rsquo;re developing an object oriented systems in Python, there are often instances where we have to create <a href=https://en.wikipedia.org/wiki/Abstract_type>abstract classes</a>.
These classes define a basic structure that we expect other parts of the code to implement.
or instance, in the context of databases, we create an abstract class that contains fundamental structure for a database class.
The derived classes then need to implement the abstract methods to form a complete structure.
The challenge arises when a derived class doesn&rsquo;t follow the expected signature of the abstract class.</p><h2 id=the-problem-with-abstract-classes>The Problem with Abstract Classes</h2><p>When developing object-oriented systems in Python, we often need to create abstract classes that define a basic structure for other parts of the code to implement. However, Python doesn&rsquo;t enforce signature adherence in derived classes, which can lead to inconsistencies.</p><h2 id=creating-abstract-classes-in-python>Creating Abstract Classes in Python</h2><p>Let&rsquo;s start with a basic abstract class example:</p><div class="code mb-2"><i class="title px-2">base.py</i><hr class="p-0 m-0"><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#b6a0ff>from</span> abc <span style=color:#b6a0ff>import</span> ABC, abstractmethod
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#b6a0ff>class</span> Database(ABC):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>    <span style=color:#b6a0ff>def</span> <span style=color:#feacd0>setup</span>(<span style=color:#f78fe7>self</span>):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>        <span style=color:#f78fe7>print</span>(<span style=color:#79a8ff>&#34;setup step&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>    @abstractmethod
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>    <span style=color:#b6a0ff>def</span> <span style=color:#feacd0>connect</span>(<span style=color:#f78fe7>self</span>) <span style=color:#00d3d0>-&gt;</span> <span style=color:#f78fe7>bool</span>:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>        <span style=color:#b6a0ff>pass</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>    @abstractmethod
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>    <span style=color:#b6a0ff>def</span> <span style=color:#feacd0>query</span>(<span style=color:#f78fe7>self</span>, query: <span style=color:#f78fe7>str</span>) <span style=color:#00d3d0>-&gt;</span> <span style=color:#f78fe7>list</span>[<span style=color:#f78fe7>dict</span>]:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>        <span style=color:#b6a0ff>pass</span>
</span></span></code></pre></div></div><p>Derived classes:<div class="code mb-2"><i class="title px-2">derived.py</i><hr class="p-0 m-0"><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#b6a0ff>from</span> database <span style=color:#b6a0ff>import</span> Database
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#b6a0ff>class</span> PostgreSQL(Database):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>    <span style=color:#b6a0ff>def</span> <span style=color:#feacd0>connect</span>(<span style=color:#f78fe7>self</span>) <span style=color:#00d3d0>-&gt;</span> <span style=color:#f78fe7>bool</span>:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>        <span style=color:#f78fe7>print</span>(<span style=color:#79a8ff>&#34;PostgreSQL trying to establish a connection&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>        <span style=color:#b6a0ff>return</span> <span style=color:#00bcff>True</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>    <span style=color:#b6a0ff>def</span> <span style=color:#feacd0>query</span>(<span style=color:#f78fe7>self</span>, query: <span style=color:#f78fe7>str</span>) <span style=color:#00d3d0>-&gt;</span> <span style=color:#f78fe7>list</span>[<span style=color:#f78fe7>dict</span>]:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>        <span style=color:#f78fe7>print</span>(<span style=color:#79a8ff>&#34;running PostgreSQL query&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>        <span style=color:#b6a0ff>return</span> [{<span style=color:#79a8ff>&#34;data&#34;</span>: <span style=color:#79a8ff>&#34;something&#34;</span>}]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#b6a0ff>class</span> MySQL(Database):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>    <span style=color:#b6a0ff>def</span> <span style=color:#feacd0>connect</span>(<span style=color:#f78fe7>self</span>) <span style=color:#00d3d0>-&gt;</span> <span style=color:#f78fe7>bool</span>:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>        <span style=color:#f78fe7>print</span>(<span style=color:#79a8ff>&#34;MySQL trying to establish a connection&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>        <span style=color:#b6a0ff>return</span> <span style=color:#00bcff>True</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>    <span style=color:#b6a0ff>def</span> <span style=color:#feacd0>query</span>(<span style=color:#f78fe7>self</span>, query: <span style=color:#f78fe7>str</span>) <span style=color:#00d3d0>-&gt;</span> <span style=color:#f78fe7>list</span>[<span style=color:#f78fe7>dict</span>]:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>        <span style=color:#f78fe7>print</span>(<span style=color:#79a8ff>&#34;running MySQL query&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>        <span style=color:#b6a0ff>return</span> [{<span style=color:#79a8ff>&#34;data&#34;</span>: <span style=color:#79a8ff>&#34;something else&#34;</span>}]
</span></span></code></pre></div></div></p><p>Test:<div class="code mb-2"><i class="title px-2">test.py</i><hr class="p-0 m-0"><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#b6a0ff>from</span> database <span style=color:#b6a0ff>import</span> MySQL
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>MySQL()<span style=color:#00d3d0>.</span>connect()
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>output <span style=color:#00d3d0>=</span> MySQL()<span style=color:#00d3d0>.</span>query(<span style=color:#79a8ff>&#34;where 1&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#f78fe7>print</span>(output)
</span></span></code></pre></div></div></p><p>Output:<div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ python test.py
</span></span><span style=display:flex><span>MySQL trying to establish a connection
</span></span><span style=display:flex><span>running MySQL query
</span></span><span style=display:flex><span><span style=color:#00d3d0>[{</span><span style=color:#79a8ff>&#39;data&#39;</span>: <span style=color:#79a8ff>&#39;something else&#39;</span><span style=color:#00d3d0>}]</span>
</span></span></code></pre></td></tr></table></div></div></div></p><p>In this particular scenario, everything functions smoothly without any issues.
However, as a project expands and more individuals become involved, there is a possibility that some might not follow the
established standards exactly.
Python itself doesn&rsquo;t prevent this.</p><h2 id=the-issue-no-signature-enforcement>The Issue: No Signature Enforcement</h2><p>Consider this implementation of the MySQL class, which completely deviates from the signatures of the abstract class:</p><div class="code mb-2"><i class="title px-2">derived.py</i><hr class="p-0 m-0"><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-python data-lang=python><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#b6a0ff>from</span> database <span style=color:#b6a0ff>import</span> Database
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#b6a0ff>class</span> MySQL(Database):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>    <span style=color:#b6a0ff>def</span> <span style=color:#feacd0>connect</span>(<span style=color:#f78fe7>self</span>):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>        <span style=color:#f78fe7>print</span>(<span style=color:#79a8ff>&#34;MySQL trying to establish a connection&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>
</span></span><span style=display:flex;background-color:#191919><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span>    <span style=color:#b6a0ff>def</span> <span style=color:#feacd0>query</span>(<span style=color:#f78fe7>self</span>, query, limit):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span>        <span style=color:#f78fe7>print</span>(<span style=color:#79a8ff>&#34;running MySQL query&#34;</span>)
</span></span><span style=display:flex;background-color:#191919><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9</span><span>        <span style=color:#b6a0ff>return</span> <span style=color:#79a8ff>&#34;something else&#34;</span>
</span></span></code></pre></div></div><p>Python test:<div class="code mb-2"><i class="title px-2">test.py</i><hr class="p-0 m-0"><pre tabindex=0><code class=language-python,linenos data-lang=python,linenos>from database import MySQL
MySQL().connect()
output = MySQL().query(&#34;where 1&#34;, 100)
print(output)
</code></pre></div>Output:<div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ python test.py
</span></span><span style=display:flex><span>MySQL trying to establish a connection
</span></span><span style=display:flex><span>running MySQL query
</span></span><span style=display:flex><span>something <span style=color:#b6a0ff>else</span>
</span></span></code></pre></td></tr></table></div></div></div></p><p>As you can see, Python didn&rsquo;t check the signature at all.</p><p>Allowing this structure to merge into your codebase would violate the established standards.</p><h2 id=solution-using-abcmeta-library>Solution: Using abcmeta Library</h2><p>Now, can we compel everyone to adhere to the abstract class signatures?
This is where the <a href=https://github.com/mortymacs/abcmeta><code>abcmeta</code></a> project comes into play.</p><div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ pip install abcmeta
</span></span></code></pre></td></tr></table></div></div></div><p>The only thing needs to be changed in your code, is in your abstract class file:</p><p>from:<div class="code mb-2"><i class="title px-2">base.py</i><hr class="p-0 m-0"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#b6a0ff>from</span> abc <span style=color:#b6a0ff>import</span> ABC, abstractmethod
</span></span></code></pre></td></tr></table></div></div></div>to:<div class="code mb-2"><i class="title px-2">base.py</i><hr class="p-0 m-0"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#b6a0ff>from</span> abcmeta <span style=color:#b6a0ff>import</span> ABC, abstractmethod
</span></span></code></pre></td></tr></table></div></div></div></p><p>This library then examines and ensures that all signatures align with the abstract class.</p><h2 id=how-abcmeta-works>How abcmeta Works</h2><p>Now, let&rsquo;s run the previous example and see what will happen:</p><div class="code mb-2"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ python test_db.py
</span></span><span style=display:flex><span>Traceback <span style=color:#00d3d0>(</span>most recent call last<span style=color:#00d3d0>)</span>:
</span></span><span style=display:flex><span>  File <span style=color:#79a8ff>&#34;/home/mort/project/test.py&#34;</span>, line 1, in &lt;module&gt;
</span></span><span style=display:flex><span>    from database import MySQL
</span></span><span style=display:flex><span>  File <span style=color:#79a8ff>&#34;/home/mort/project/database.py&#34;</span>, line 13, in &lt;module&gt;
</span></span><span style=display:flex><span>    class MySQL<span style=color:#00d3d0>(</span>Database<span style=color:#00d3d0>)</span>:
</span></span><span style=display:flex><span>  File <span style=color:#79a8ff>&#34;&lt;frozen abc&gt;&#34;</span>, line 106, in __new__
</span></span><span style=display:flex><span>  File <span style=color:#79a8ff>&#34;/home/mort/project/.venv/lib/python3.12/site-packages/abcmeta/__init__.py&#34;</span>, line 198, in __init_subclass__
</span></span><span style=display:flex><span>    raise AttributeError<span style=color:#00d3d0>(</span><span style=color:#79a8ff>&#34;\n{}&#34;</span>.format<span style=color:#00d3d0>(</span><span style=color:#79a8ff>&#34;\n\n&#34;</span>.join<span style=color:#00d3d0>(</span>errors<span style=color:#00d3d0>)))</span>
</span></span><span style=display:flex><span>AttributeError:
</span></span><span style=display:flex><span>1: incorrect signature.
</span></span><span style=display:flex><span>Signature of the derived method is not the same as parent class:
</span></span><span style=display:flex><span>- connect<span style=color:#00d3d0>(</span>self<span style=color:#00d3d0>)</span> -&gt; bool
</span></span><span style=display:flex><span>?              --------
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>+ connect<span style=color:#00d3d0>(</span>self<span style=color:#00d3d0>)</span>
</span></span><span style=display:flex><span>Derived method expected to <span style=color:#b6a0ff>return</span> in <span style=color:#79a8ff>&#39;&lt;class &#39;</span>bool<span style=color:#79a8ff>&#39;&gt;&#39;</span> type, but returns <span style=color:#79a8ff>&#39;typing.Any&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>2: incorrect signature.
</span></span><span style=display:flex><span>Signature of the derived method is not the same as parent class:
</span></span><span style=display:flex><span>- query<span style=color:#00d3d0>(</span>self, query: str<span style=color:#00d3d0>)</span> -&gt; list<span style=color:#00d3d0>[</span>dict<span style=color:#00d3d0>]</span>
</span></span><span style=display:flex><span>+ query<span style=color:#00d3d0>(</span>self, query, limit<span style=color:#00d3d0>)</span>
</span></span><span style=display:flex><span>Derived method expected to <span style=color:#b6a0ff>return</span> in <span style=color:#79a8ff>&#39;list[dict]&#39;</span> type, but returns <span style=color:#79a8ff>&#39;typing.Any&#39;</span>
</span></span></code></pre></td></tr></table></div></div></div><p>The error message clarifies that the signature differs from that of the abstract class, and explains with all details.</p><div class="alert alert-important border-0 rounded-0 py-3 px-3">Additionally, it&rsquo;s important to know that <code>abcmeta</code> utilizes <a href=https://docs.python.org/3/reference/datamodel.html target=_blank>metaclasses</a>
implying that it examines the class when the class is defined!</div><p>Therefore, if you modify the test code to something like this:</p><div class="code mb-2"><i class="title px-2">test.py</i><hr class="p-0 m-0"><div class=highlight><div style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#fff;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#b6a0ff>from</span> database <span style=color:#b6a0ff>import</span> MySQL
</span></span></code></pre></td></tr></table></div></div></div><p>Then you&rsquo;ll get the same error result.</p><h2 id=conclusion>Conclusion</h2><p>By using these kinds of libraries in Python, we can proactively avoid future errors by forcing derived classes to follow
the abstract class signatures, similar to <a href=https://en.wikipedia.org/wiki/Strong_and_weak_typing>strong-typed</a> programming languages.</p></div><div></div><div><label class="badge p-0 article-tag fs-6 mx-1">#python</label>
<label class="badge p-0 article-tag fs-6 mx-1">#classes</label>
<label class="badge p-0 article-tag fs-6 mx-1">#oop</label></div><div class=mb-3></div><div class=giscus></div></div><script src=https://giscus.app/client.js data-repo=mortymacs/mortymacs data-repo-id=R_kgDOLJ_j-Q data-category=Q&A data-category-id=DIC_kwDOLJ_j-c4Ccuug data-mapping=url data-reactions-enabled=0 data-emit-metadata=0 data-input-position=top data-theme=dark data-lang=en data-loading=lazy crossorigin=anonymous async></script></div></div></div></div><footer class="footer py-1 mt-auto fs-6"><div class=d-flex><div class="p-1 px-2 copyright-1">&copy;Morteza NourelahiAlamdari. All rights reserved.</div><div class="p-1 px-2 flex-fill text-end copyright-2"><a href=https://creativecommons.org/licenses/by-sa/4.0/ class="link-light link-underline-light" target=_blank><i class="fa-solid fa-scale-balanced"></i> CC BY-SA 4.0</a></div><div class="p-1 px-2 text-end git-status"><a href=https://github.com/mortymacs/mortymacs class="link-light link-underline-light" title=Git target=_blank><i class="fa-solid fa-code-branch"></i>origin/main</a></div><div class="p-1 px-2 text-end links"><a class="px-1 link-info" title=Github href=https://github.com/mortymacs target=_blank><i class="fa-brands fa-github"></i></a>
<a class="px-1 link-info" title=LinkedIn href=https://www.linkedin.com/in/mortymacs/ target=_blank><i class="fa-brands fa-linkedin"></i></a>
<a class="px-1 link-info" title=RSS href=https://0t1.me/rss.xml target=_blank><i class="fa-solid fa-square-rss"></i></a>
<a class="px-1 link-info" title=Sitemap href=https://0t1.me/sitemap.xml target=_blank><i class="fa-solid fa-sitemap"></i></a></div></div></footer></body></html>